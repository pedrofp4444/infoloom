---
import DocsLayout from "../../../layouts/DocsLayout.astro";
import DocsBreadcrumb from "../../../components/docs/DocsBreadcrumb.vue";
import DocsSection from "../../../components/docs/DocsSection.vue";
import DocsCallout from "../../../components/docs/DocsCallout.vue";
import DocsSteps from "../../../components/docs/DocsSteps.vue";

const toc = [
    { id: "introducao", title: "Introdu√ß√£o", level: 2 },
    { id: "convite", title: "Como convidar o bot", level: 2 },
    { id: "configuracao", title: "Configura√ß√£o inicial", level: 2 },
    { id: "comandos", title: "Comandos dispon√≠veis", level: 2 },
    { id: "boas-praticas", title: "Boas pr√°ticas e ajuda", level: 2 },
];

const installationSteps = [
    {
        title: "Abrir o link de convite",
        description: "Acede ao link oficial de convite do bot Infoloom:",
        code: "https://discord.com/oauth2/authorize?client_id=1432413547706585088&permissions=68608&integration_type=0&scope=bot",
        language: "bash",
    },
    {
        title: "Selecionar o servidor",
        description:
            "Escolhe o servidor Discord onde queres adicionar o bot. Apenas administradores podem convidar o bot.",
    },
    {
        title: "Conceder permiss√µes",
        description:
            "Autoriza as permiss√µes pedidas, o bot precisa de ler e enviar mensagens, e ver o hist√≥rico do canal.",
    },
    {
        title: "Confirmar instala√ß√£o",
        description:
            "Depois de autorizado, o bot aparecer√° na lista de membros do servidor. Podes test√°-lo com o comando `+ajuda`.",
    },
];
---

<DocsLayout
    title="Instala√ß√£o e Utiliza√ß√£o do Bot Infoloom"
    description="Guia passo a passo para convidar, configurar e utilizar o bot acad√©mico Infoloom no Discord."
    toc={toc}
>
    <DocsBreadcrumb
        items={[
            { label: "Documenta√ß√£o", href: "/docs" },
            { label: "Integra√ß√µes", href: "/docs/integracoes" },
            { label: "Discord", href: "/docs/integracoes/discord" },
        ]}
        client:load
    />

    <DocsSection id="introducao" title="Introdu√ß√£o" client:load>
        <p class="text-lg text-muted-foreground mt-2">
            O <strong>Bot Infoloom</strong> foi criado para simplificar a comunica√ß√£o
            e gest√£o de avalia√ß√µes no Discord. Permite receber notifica√ß√µes autom√°ticas
            de testes, projetos e prazos de entrega diretamente nos canais de servidores.
        </p>

        <DocsCallout
            variant="info"
            title="Principais funcionalidades"
            client:load
        >
            <ul class="list-disc list-inside mt-2">
                <li>Subscri√ß√£o de avisos por Unidade Curricular (UC).</li>
                <li>
                    Defini√ß√£o de quantos dias antes queres receber lembretes.
                </li>
                <li>Cancelamento ou listagem das subscri√ß√µes ativas.</li>
                <li>Envio autom√°tico de notifica√ß√µes antes das avalia√ß√µes.</li>
            </ul>
        </DocsCallout>
    </DocsSection>

    <DocsSection id="convite" title="Como convidar o bot" client:load>
        <DocsSteps steps={installationSteps} client:load />
        <DocsCallout
            variant="warning"
            title="Permiss√µes necess√°rias"
            client:load
        >
            <p>
                O bot precisa apenas de permiss√µes b√°sicas:
                <strong>Enviar mensagens</strong>, <strong>Ler mensagens</strong
                > e
                <strong>Ver hist√≥rico</strong>. N√£o requer permiss√µes de
                modera√ß√£o.
            </p>
        </DocsCallout>
    </DocsSection>

    <DocsSection id="configuracao" title="Configura√ß√£o inicial" client:load>
        <p class="text-muted-foreground mb-4">
            Depois de convidares o bot, recomenda-se criar um canal dedicado,
            por exemplo <code>#avisos-academicos</code>, onde ele possa enviar
            as notifica√ß√µes.
        </p>
        <p class="text-muted-foreground">
            No primeiro uso, o bot responde apenas a comandos que comecem por
            <code>+</code>. Se algu√©m escrever incorretamente um comando mas
            usar uma palavra-chave conhecida (como o nome de uma UC), o bot
            responde com uma mensagem de ajuda e o formato correto.
        </p>
    </DocsSection>

    <DocsSection id="comandos" title="Comandos dispon√≠veis" client:load>
        <h3 class="mt-4 mb-2 font-semibold">
            üìå <code>+subscrever &lt;slug&gt; [dias]</code>
        </h3>
        <p class="text-muted-foreground">
            Subscreve notifica√ß√µes para uma UC. O par√¢metro <code>dias</code> √© opcional
            e indica quantos dias antes do evento o lembrete deve ser enviado (por
            defeito, 7 dias).
        </p>
        <ul class="list-disc list-inside mt-2 text-muted-foreground">
            <li>
                <code>+subscrever p1</code> ‚Äî subscreve a UC <em>P1</em> com aviso
                7 dias antes.
            </li>
            <li>
                <code>+subscrever p1 3</code> ‚Äî subscreve a UC <em>P1</em> com aviso
                3 dias antes.
            </li>
        </ul>

        <h3 class="mt-6 mb-2 font-semibold">
            ‚ùå <code>+cancelar &lt;slug&gt; [dias]</code>
        </h3>
        <p class="text-muted-foreground">
            Cancela uma subscri√ß√£o existente. Se for omitido o n√∫mero de dias,
            remove todas as subscri√ß√µes dessa UC no canal atual.
        </p>
        <ul class="list-disc list-inside mt-2 text-muted-foreground">
            <li>
                <code>+cancelar p1</code> ‚Äî remove todas as subscri√ß√µes da UC <em
                    >P1</em
                >.
            </li>
            <li>
                <code>+cancelar p1 3</code> ‚Äî remove apenas a subscri√ß√£o com aviso
                3 dias antes.
            </li>
        </ul>

        <h3 class="mt-6 mb-2 font-semibold">üìã <code>+listar</code></h3>
        <p class="text-muted-foreground">
            Lista todas as subscri√ß√µes ativas no canal atual, incluindo UCs e
            prazos de aviso configurados.
        </p>
        <p class="text-muted-foreground mt-2 italic">
            Exemplo de resposta: <br />
            <pre
                class="bg-muted-foreground/10 p-4 rounded-md text-sm overflow-x-auto mt-2">üìã Subscri√ß√µes deste canal:
- p1 (aviso 3 dias antes)
- p1 (aviso 7 dias antes)
- p1 (aviso 4 dias antes)</pre>
        </p>
        <h3 class="mt-6 mb-2 font-semibold">
            üîç <code>+uc &lt;sigla|slug&gt;</code>
        </h3>
        <p class="text-muted-foreground">
            Mostra detalhes completos de uma Unidade Curricular (UC), incluindo:
            perfil, crit√©rios de avalia√ß√£o, docentes e pr√≥ximas avalia√ß√µes.
        </p>
        <p class="text-muted-foreground mt-2 italic">
            Exemplo gen√©rico de utiliza√ß√£o:
        </p>
        <pre
            class="bg-muted-foreground/10 p-4 rounded-md text-sm overflow-x-auto mt-2">
Projeto 1 (P1)
Perfil: Tronco Comum
Crit√©rios: Projeto (50%) + Teste (50%, Min. 8 valores)
Docentes: Docente1 (Regente); Docente2; Docente3; Docente4
üìÖ Pr√≥ximas avalia√ß√µes:
- Checkpoint#1 (2025-11-02)
- Checkpoint#2 (2025-11-30)
- Entrega Final (2025-12-29)
- Teste (2026-01-05)</pre>
    </DocsSection>

    <DocsSection id="boas-praticas" title="Boas pr√°ticas e ajuda" client:load>
        <ul class="list-disc list-inside text-muted-foreground">
            <li>
                Utiliza sempre os comandos num canal onde o bot tenha acesso.
            </li>
            <li>
                Usa a sigla ou o slug oficial da UC (ex: <code>p1</code>, <code
                    >uc-p1</code
                >, <code>unidade-curricular-p1</code>).
            </li>
            <li>
                Se escreveres o comando incorretamente, o bot responder√° com o
                formato correto.
            </li>
            <li>
                Podes testar o funcionamento com o comando <code>+ajuda</code>.
            </li>
            <li>Evita duplicar subscri√ß√µes, o bot avisa se j√° existirem.</li>
        </ul>

        <DocsCallout variant="info" title="Suporte" client:load>
            <p>
                Em caso de d√∫vidas, contacta a equipa Infoloom atrav√©s do canal
                oficial em
                <a href="/contacts" class="underline">Contactos</a> ou reporta o
                problema diretamente no GitHub do projeto:
                <a
                    href="https://github.com/pedrofp4444/infoloom"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="underline">https://github.com/pedrofp4444/infoloom</a
                >.
            </p>
        </DocsCallout>
    </DocsSection>

    <div class="mt-6 flex justify-center">
        <p class="text-xs text-muted-foreground italic text-center">
            Vers√£o do documento: 1.0.1 ‚Ä¢ √öltima atualiza√ß√£o: Outubro 2025 ‚Äî
            Infoloom
        </p>
    </div>
</DocsLayout>
