---
import DocsLayout from "../../../layouts/DocsLayout.astro";
import DocsBreadcrumb from "../../../components/docs/DocsBreadcrumb.vue";
import DocsSection from "../../../components/docs/DocsSection.vue";
import DocsSubsection from "../../../components/docs/DocsSubsection.vue";
import DocsSteps from "../../../components/docs/DocsSteps.vue";
import DocsCallout from "../../../components/docs/DocsCallout.vue";
import DocsPreview from "../../../components/docs/DocsPreview.vue";
import CodeBlock from "../../../components/docs/CodeBlock.vue";
import Chatbot1 from "@/components/Chatbot.vue";

const toc = [
    { id: "introducao", title: "Introdu√ß√£o", level: 2 },
    { id: "instalacao", title: "Instala√ß√£o", level: 2 },
    { id: "utilizacao-base", title: "Utiliza√ß√£o Base", level: 2 },
    { id: "api", title: "Propriedades e Eventos", level: 2 },
    { id: "componentes-internos", title: "Componentes Internos", level: 2 },
    { id: "estado-logica", title: "Estados e L√≥gica Interna", level: 2 },
    { id: "design-decisions", title: "Decis√µes de Design", level: 2 },
    { id: "integracao", title: "Integra√ß√£o com o Projeto", level: 2 },
    { id: "testes-edgecases", title: "Testes e Edge Cases", level: 2 },
    { id: "boas-praticas", title: "Boas Pr√°ticas e Recomenda√ß√µes", level: 2 },
    { id: "roadmap", title: "Extens√µes Futuras / Roadmap", level: 2 },
];

const installationSteps = [
    {
        title: "Instalar depend√™ncias",
        description:
            "Instala as depend√™ncias necess√°rias para correr o chatbot e a puÃÅblica API local utilizada no exemplo.",
        code: "npm install axios lucide-vue-next date-fns",
        language: "bash",
    },
    {
        title: "Adicionar o componente",
        description:
            "Coloca `Chatbot.vue` em `components/` e regista-o onde for necess√°rio (p√°ginas, layouts, etc.).",
        code: "cp components/Chatbot.vue src/components/ui/chatbot/Chatbot.vue",
        language: "bash",
    },
    {
        title: "Configurar endpoint",
        description:
            "Adiciona a rota serverless `pages/api/chat.ts` (ou equivalente) que proxy para a API LLM que usas.",
        code: "touch src/pages/api/chat.ts && # cola o handler fornecido",
        language: "bash",
    },
];

const basicPreview = `<template>
  <div class="h-[600px]">
    <Chatbot />
  </div>
</template>

<script setup lang="ts">
import Chatbot from '@/components/Chatbot.vue'
</script>`;
---

<DocsLayout
    title="Chatbot ‚Äî Assistente de UCs"
    description="Componente de chat orientado para unidades curriculares (UCs) com integra√ß√£o LLM e pesquisa local em ucs.json."
    toc={toc}
>
    <DocsBreadcrumb
        items={[
            { label: "Documenta√ß√£o", href: "/docs" },
            { label: "Componentes", href: "/docs/componentes" },
            { label: "Chatbot", href: "/docs/componentes/chatbot" },
        ]}
        client:load
    />

    <!-- ============================================================= -->
    <!-- Introdu√ß√£o -->
    <!-- ============================================================= -->
    <DocsSection id="introducao" title="Introdu√ß√£o" client:load>
        <p class="text-lg text-muted-foreground mt-2">
            O componente <strong>Chatbot</strong> fornece uma interface conversacional
            focada em unidades curriculares (UCs). O objetivo principal √© permitir
            que estudantes e docentes obtenham respostas r√°pidas sobre avalia√ß√µes,
            crit√©rios, docentes e outros metadados presentes no ficheiro <code
                >ucs.json</code
            >, complementando com um modelo LLM para formata√ß√£o e s√≠ntese das
            respostas.
        </p>

        <p class="text-lg text-muted-foreground mt-4">
            A arquitetura combina:
            <ul class="list-disc list-inside mt-2">
                <li>
                    Pesquisa local em <code>ucs.json</code> para identificar a UC
                    alvo;
                </li>
                <li>Normaliza√ß√£o e consolida√ß√£o de avalia√ß√µes;</li>
                <li>
                    Contextualiza√ß√£o do prompt do LLM para garantir respostas
                    factuais e limitadas ao contexto;
                </li>
                <li>Graceful fallback e mensagens de erro amig√°veis.</li>
            </ul>
        </p>

        <DocsCallout
            variant="info"
            title="Resumo das funcionalidades"
            client:load
        >
            <ul class="list-disc list-inside mt-2">
                <li>
                    Selec√ß√£o da UC por sigla ou nome, com sugest√µes quando
                    houver m√∫ltiplas correspond√™ncias;
                </li>
                <li>
                    Consolida√ß√£o autom√°tica de avalia√ß√µes repetidas por per√≠odo;
                </li>
                <li>Proxy serverless para LLM (endpoint `/api/chat`);</li>
                <li>
                    Hist√≥rico de conversa simples e limites de contexto para o
                    LLM;
                </li>
                <li>
                    Mensagens de erro tratadas e indicadores de
                    carregamento/typing.
                </li>
            </ul>
        </DocsCallout>
    </DocsSection>

    <!-- ============================================================= -->
    <!-- Instala√ß√£o -->
    <!-- ============================================================= -->
    <DocsSection id="instalacao" title="Instala√ß√£o" client:load>
        <DocsSteps steps={installationSteps} client:load />
        <DocsCallout variant="warning" title="Requisitos" client:load>
            <p>
                O componente assume ambiente baseado em Vite/Nuxt/Astro com
                suporte a Vue 3 (Composition API). O endpoint serverless faz
                fetch para uma API externa (p.e. APIfree). Garante que tens uma
                pol√≠tica de CORS adequada e limites de taxa configurados para
                evitar abuse.
            </p>
        </DocsCallout>
    </DocsSection>

    <!-- ============================================================= -->
    <!-- Utiliza√ß√£o Base -->
    <!-- ============================================================= -->
    <DocsSection id="utilizacao-base" title="Utiliza√ß√£o Base" client:load>
        <p class="text-muted-foreground mb-4">
            Exemplo m√≠nimo de uso do componente. Este exemplo ilustra a
            integra√ß√£o direta e r√°pida do chat numa p√°gina ou painel.
        </p>

        <DocsPreview
            title="Exemplo: Chatbot incorporado"
            code={basicPreview}
            client:load
        >
            <div
                class="border rounded-lg p-4 text-center text-sm text-muted-foreground"
            >
                Previsualiza√ß√£o: incorpora o componente <code
                    >&lt;Chatbot /&gt;</code
                > no teu layout.
            </div>
        </DocsPreview>

        <DocsCallout variant="info" title="Nota sobre dados" client:load>
            <p>
                O componente carrega por defeito os dados de <code
                    >/data/ucs.json</code
                >. Se preferires, podes passar um prop (ex.: <code>ucsData</code
                >) e controlar o carregamento externamente.
            </p>
        </DocsCallout>
    </DocsSection>
    <!-- ============================================================= -->
    <!-- Propriedades e Eventos -->
    <!-- ============================================================= -->
    <DocsSection id="api" title="‚öôÔ∏è Propriedades e Eventos" client:load>
        <p class="text-lg text-muted-foreground">
            O componente <strong>Chatbot.vue</strong> utiliza o padr√£o de <em
                >self-contained state</em
            > ‚Äî todos os estados internos s√£o geridos no pr√≥prio componente. No entanto,
            existem v√°rias
            <em>propriedades computadas</em> e <em>eventos internos</em> relevantes
            para extens√£o, teste ou integra√ß√£o com outros m√≥dulos (ex.: registo de
            logs, anal√≠tica, etc.).
        </p>

        <h4 class="mt-6 font-semibold">
            Propriedades internas (reactive state)
        </h4>
        <table class="table-auto w-full text-sm mt-4 border-collapse">
            <thead>
                <tr class="border-b text-left">
                    <th class="py-2">Propriedade</th>
                    <th class="py-2">Tipo</th>
                    <th class="py-2">Descri√ß√£o</th>
                </tr>
            </thead>
            <tbody>
                <tr class="border-b">
                    <td><code>messages</code></td>
                    <td
                        ><code
                            >Ref&lt;Array&lt;<code
                                >&#123; role: string; content: string;
                                timestamp: Date <code>&#125;&gt;&gt;</code
                                ></code
                            >
                            <td
                                >Hist√≥rico de mensagens do utilizador e do
                                assistente.</td
                            >
                        </code>
                        <tr class="border-b">
                            <td><code>userInput</code></td>
                            <td><code>Ref&lt;string&gt;</code></td>
                            <td
                                >Conte√∫do atual do campo de input do utilizador.</td
                            >
                        </tr>
                        <tr class="border-b">
                            <td><code>fase</code></td>
                            <td
                                ><code>Ref&lt;'selecionar' | 'chat'&gt;</code
                                ></td
                            >
                            <td
                                >Estado de fase atual ‚Äî define se o bot est√° a
                                selecionar UC ou em conversa ativa.</td
                            >
                        </tr>
                        <tr class="border-b">
                            <td><code>ucSelecionada</code></td>
                            <td><code>Ref&lt;any | null&gt;</code></td>
                            <td
                                >Unidade curricular atualmente selecionada
                                (objeto do JSON de UCs).</td
                            >
                        </tr>
                        <tr class="border-b">
                            <td><code>loading</code></td>
                            <td><code>Ref&lt;boolean&gt;</code></td>
                            <td
                                >Indica se o chatbot est√° a aguardar resposta do
                                LLM.</td
                            >
                        </tr>
                        <tr class="border-b">
                            <td><code>isTyping</code></td>
                            <td><code>Ref&lt;boolean&gt;</code></td>
                            <td
                                >Controla a exibi√ß√£o do indicador de
                                "digitando...".</td
                            >
                        </tr>
                        <tr>
                            <td><code>ucsData</code></td>
                            <td><code>Array&lt;any&gt;</code></td>
                            <td
                                >Lista completa das UCs carregadas de <code
                                    >/data/ucs.json</code
                                >.</td
                            >
                        </tr>
                    </td>
                </tr>

                <h4 class="mt-8 font-semibold">
                    Eventos internos e fun√ß√µes utilit√°rias
                </h4>
                <ul
                    class="list-disc list-inside text-sm text-muted-foreground mt-2"
                >
                    <li>
                        <code>scrollToBottom()</code> ‚Äî garante que a janela de mensagens
                        rola automaticamente para o fim ap√≥s nova mensagem.
                    </li>
                    <li>
                        <code>normalize(str)</code> ‚Äî remove acentua√ß√£o e converte
                        texto para min√∫sculas (para pesquisa robusta).
                    </li>
                    <li>
                        <code>encontrarUC(input)</code> ‚Äî pesquisa local no JSON
                        de UCs, retorna correspond√™ncia exata ou m√∫ltiplas op√ß√µes.
                    </li>
                    <li>
                        <code>consolidarAvaliacoes(avaliacoes)</code> ‚Äî agrupa avalia√ß√µes
                        com mesma descri√ß√£o e datas pr√≥ximas.
                    </li>
                    <li>
                        <code>sendMessage()</code> ‚Äî rotina principal que processa
                        a mensagem do utilizador, incluindo:
                        <ul class="list-disc list-inside ml-6 mt-1">
                            <li>detec√ß√£o de comandos ("mudar de UC");</li>
                            <li>gest√£o da fase de sele√ß√£o;</li>
                            <li>prepara√ß√£o do contexto e envio ao LLM;</li>
                            <li>atualiza√ß√£o do hist√≥rico local e UI.</li>
                        </ul>
                    </li>
                </ul>

                <DocsCallout
                    variant="info"
                    title="APIs globais e depend√™ncias"
                    client:load
                >
                    <p class="text-sm text-muted-foreground">
                        O componente utiliza a vari√°vel global <code
                            >window.apifree.chat()</code
                        > para chamar o modelo LLM. Esta API deve ser inicializada
                        externamente (p. ex., num <code>onMounted()</code> do layout
                        principal).
                    </p>
                </DocsCallout>

                <h4 class="mt-8 font-semibold">
                    Eventos customizados (se expandidos)
                </h4>
                <p class="text-sm text-muted-foreground mt-2">
                    Embora o componente atual n√£o emita eventos para o exterior,
                    recomenda-se adicionar suporte futuro a:
                </p>
                <ul
                    class="list-disc list-inside text-sm text-muted-foreground mt-2"
                >
                    <li>
                        <code>@message-sent</code> ‚Äî disparado ap√≥s o envio de cada
                        mensagem do utilizador;
                    </li>
                    <li>
                        <code>@reply-received</code> ‚Äî disparado quando o LLM devolve
                        uma resposta v√°lida;
                    </li>
                    <li>
                        <code>@uc-changed</code> ‚Äî disparado quando o utilizador
                        muda de UC.
                    </li>
                </ul>

                <DocsCallout
                    variant="info"
                    title="Extens√£o recomendada"
                    client:load
                >
                    <p class="text-sm text-muted-foreground">
                        Estes eventos s√£o √∫teis se o componente for integrado em
                        dashboards, onde se possa registar a intera√ß√£o com
                        analytics, ou sincronizar o estado da conversa com um
                        store global (Pinia, Zustand, etc.).
                    </p>
                </DocsCallout>
            </tbody>

            <!-- ============================================================= -->
            <!-- Componentes Internos -->
            <!-- ============================================================= -->
            <DocsSection
                id="componentes-internos"
                title="üß© Componentes Internos"
                client:load
            >
                <p class="text-muted-foreground mb-4">
                    O <strong>Chatbot.vue</strong> utiliza um conjunto m√≠nimo de
                    componentes de UI reutiliz√°veis do sistema <code
                        >@/components/ui</code
                    >. Cada um desempenha um papel bem definido na estrutura da
                    interface.
                </p>

                <h4 class="font-semibold mt-4">1. <code>Button</code></h4>
                <p class="text-sm text-muted-foreground">
                    Utilizado no bot√£o de envio da mensagem. Implementa estados
                    de carregamento e desativa√ß√£o.
                </p>
                <CodeBlock
                    language="vue"
                    code={`<Button type="submit" :disabled="loading || !userInput.trim()" class="h-11 px-6">
  <span v-if="!loading">Enviar</span>
  <span v-else class="flex items-center gap-2">
    <span class="w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"></span>
    A enviar
  </span>
</Button>`}
                />

                <h4 class="font-semibold mt-6">2. <code>Input</code></h4>
                <p class="text-sm text-muted-foreground">
                    Campo de entrada principal. Reativo atrav√©s de <code
                        >v-model</code
                    >, suporta o envio com <code>@submit.prevent</code>.
                </p>

                <h4 class="font-semibold mt-6">3. <code>Card</code></h4>
                <p class="text-sm text-muted-foreground">
                    Cont√©m cada bolha de mensagem, distinguindo entre utilizador
                    e assistente com base na classe CSS. As sombras e bordas
                    variam conforme o papel da mensagem.
                </p>

                <h4 class="font-semibold mt-6">4. <code>Badge</code></h4>
                <p class="text-sm text-muted-foreground">
                    Exibe o estado atual da conversa (‚ÄúA selecionar‚Äù / ‚ÄúEm
                    conversa‚Äù). Pode ser substitu√≠do por um componente <code
                        >StatusDot</code
                    > customizado, caso pretendas consist√™ncia visual em dashboards.
                </p>

                <h4 class="font-semibold mt-6">5. Indicador de ‚Äútyping‚Äù</h4>
                <p class="text-sm text-muted-foreground">
                    Representado por tr√™s pontos animados (<code
                        >.animate-bounce</code
                    >) dentro de um <code>Card</code>. O efeito √© puramente
                    visual e ativado por <code>isTyping.value = true</code>.
                </p>

                <CodeBlock
                    language="html"
                    code={`<div v-if="isTyping" class="flex gap-3 animate-in fade-in slide-in-from-bottom-4 duration-300">
  <div class="w-8 h-8 rounded-full bg-muted flex items-center justify-center flex-shrink-0 mt-1">
    <span class="text-sm">ü§ñ</span>
  </div>
  <Card class="px-4 py-3 bg-card border shadow-sm">
    <div class="flex gap-1">
      <div class="w-2 h-2 rounded-full bg-muted-foreground/40 animate-bounce" style="animation-delay: 0ms"></div>
      <div class="w-2 h-2 rounded-full bg-muted-foreground/40 animate-bounce" style="animation-delay: 150ms"></div>
      <div class="w-2 h-2 rounded-full bg-muted-foreground/40 animate-bounce" style="animation-delay: 300ms"></div>
    </div>
  </Card>
</div>`}
                />

                <DocsCallout
                    variant="info"
                    title="Estrutura modular"
                    client:load
                >
                    <p class="text-sm text-muted-foreground">
                        Todos os subcomponentes est√£o organizados de forma que
                        podem ser substitu√≠dos sem alterar a l√≥gica principal.
                        Isto permite que o mesmo motor de chat seja usado em
                        temas ou frameworks diferentes (por exemplo, Tailwind ou
                        Vuetify).
                    </p>
                </DocsCallout>

                <h4 class="font-semibold mt-6">
                    6. <code>messagesContainer</code>
                </h4>
                <p class="text-sm text-muted-foreground">
                    Elemento DOM referenciado via <code>ref</code> e utilizado pelo
                    m√©todo <code>scrollToBottom()</code>
                    para garantir visibilidade da √∫ltima mensagem. Em dispositivos
                    m√≥veis, o comportamento ‚Äúscroll-smooth‚Äù √© ativado por <code
                        >nextTick()</code
                    > para evitar jumps.
                </p>

                <h4 class="font-semibold mt-6">
                    7. <code>messages</code> list
                </h4>
                <p class="text-sm text-muted-foreground">
                    A renderiza√ß√£o condicional de mensagens alterna entre layout
                    espelhado (<code>flex-row-reverse</code>) para o utilizador
                    e normal para o assistente. Cada mensagem inclui avatar,
                    corpo (Card) e timestamp formatado.
                </p>

                <CodeBlock
                    language="vue"
                    code={`<div v-for="(msg, i) in messages" :key="i"
  class="flex gap-3 animate-in fade-in slide-in-from-bottom-4 duration-500"
  :class="msg.role === 'user' ? 'flex-row-reverse' : 'flex-row'">
  <!-- Avatar -->
  <div class="w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 mt-1"
    :class="msg.role === 'user' ? 'bg-primary text-primary-foreground' : 'bg-muted'">
    <span class="text-sm">{{ msg.role === 'user' ? 'üë§' : 'ü§ñ' }}</span>
  </div>
  <!-- Bubble -->
  <div class="flex flex-col gap-1 max-w-[85%]" :class="msg.role === 'user' ? 'items-end' : 'items-start'">
    <Card class="px-4 py-3 shadow-sm" :class="msg.role === 'user' ? 'bg-primary text-primary-foreground' : 'bg-card border'">
      <p class="text-sm leading-relaxed whitespace-pre-wrap break-words">{{ msg.content }}</p>
    </Card>
    <span class="text-xs text-muted-foreground px-1">{{ formatTime(msg.timestamp) }}</span>
  </div>
</div>`}
                />
            </DocsSection>
            <!-- ============================================================= -->
            <!-- Estados e L√≥gica Interna -->
            <!-- ============================================================= -->
            <DocsSection
                id="estado-logica"
                title="üìà Estados e L√≥gica Interna"
                client:load
            >
                <p class="text-muted-foreground mb-6">
                    O <strong>Chatbot.vue</strong> implementa uma m√°quina de estados
                    simples que governa o comportamento global do componente. A l√≥gica
                    principal √© declarativa e gira em torno de
                    <em>fases de intera√ß√£o</em> ‚Äî iniciando com a sele√ß√£o da UC e
                    progredindo para a conversa guiada.
                </p>

                <h4 class="font-semibold mt-4">Ciclo de vida e fases</h4>
                <ul
                    class="list-disc list-inside text-sm text-muted-foreground mt-2"
                >
                    <li>
                        <strong>Fase ‚Äúselecionar‚Äù</strong> ‚Äî o chatbot espera que
                        o utilizador indique uma UC por nome ou sigla;
                    </li>
                    <li>
                        <strong>Fase ‚Äúchat‚Äù</strong> ‚Äî ap√≥s a sele√ß√£o, o bot permite
                        perguntas relacionadas com essa UC;
                    </li>
                    <li>
                        <strong>Fallback</strong> ‚Äî se uma UC deixa de estar acess√≠vel
                        (dados inconsistentes), o estado regressa a ‚Äúselecionar‚Äù.
                    </li>
                </ul>

                <CodeBlock
                    language="ts"
                    code={`const fase = ref<'selecionar' | 'chat'>('selecionar')
const ucSelecionada = ref<any | null>(null)

watch(fase, (novaFase) => {
  if (novaFase === 'selecionar') {
    messages.value.push({
      role: 'assistant',
      content: 'Ol√°! Diz-me a sigla ou nome da UC sobre a qual queres saber mais.',
      timestamp: new Date()
    })
  }
})`}
                />

                <h4 class="font-semibold mt-6">
                    Gest√£o de mensagens e normaliza√ß√£o
                </h4>
                <p class="text-sm text-muted-foreground mt-2">
                    O hist√≥rico √© mantido em mem√≥ria reativa atrav√©s de <code
                        >messages</code
                    >. Cada mensagem tem metadados m√≠nimos e √© limpa de espa√ßos
                    redundantes ou caracteres invis√≠veis.
                </p>

                <CodeBlock
                    language="ts"
                    code={`function addMessage(role: 'user' | 'assistant', content: string) {
  messages.value.push({
    role,
    content: content.trim(),
    timestamp: new Date()
  })
  nextTick(scrollToBottom)
}`}
                />

                <h4 class="font-semibold mt-6">Dete√ß√£o e sele√ß√£o de UC</h4>
                <p class="text-sm text-muted-foreground">
                    A fun√ß√£o <code>encontrarUC</code> usa normaliza√ß√£o de texto (sem
                    acentos e min√∫sculas) para comparar o input com nomes e siglas
                    de UCs. Suporta correspond√™ncia parcial e devolve m√∫ltiplas op√ß√µes
                    se necess√°rio.
                </p>

                <CodeBlock
                    language="ts"
                    code={`function encontrarUC(input: string) {
  const termo = normalize(input)
  const correspondencias = ucsData.filter(
    uc => normalize(uc.nome).includes(termo) || normalize(uc.sigla) === termo
  )
  if (correspondencias.length === 1) return correspondencias[0]
  if (correspondencias.length > 1) {
    addMessage('assistant', 'Foram encontradas v√°rias UCs: ' +
      correspondencias.map(u => u.sigla).join(', ') + '. Podes especificar melhor?')
    return null
  }
  addMessage('assistant', 'N√£o encontrei nenhuma UC com esse nome. Tenta novamente.')
  return null
}`}
                />

                <h4 class="font-semibold mt-6">
                    Integra√ß√£o com o LLM (via API)
                </h4>
                <p class="text-sm text-muted-foreground mb-3">
                    Quando a UC est√° selecionada e o utilizador envia uma
                    pergunta, a mensagem √© enviada para o endpoint <code
                        >/api/chat</code
                    >. Este endpoint formata o contexto e comunica com o modelo
                    LLM definido (p.ex., GPT-4, Claude, Mistral, etc.).
                </p>

                <CodeBlock
                    language="ts"
                    code={`async function sendMessage() {
  const input = userInput.value.trim()
  if (!input) return
  addMessage('user', input)
  userInput.value = ''
  isTyping.value = true

  if (fase.value === 'selecionar') {
    const uc = encontrarUC(input)
    if (uc) {
      ucSelecionada.value = uc
      fase.value = 'chat'
      addMessage('assistant', \`Selecionada a UC \${uc.sigla} ‚Äî \${uc.nome}\`)
      addMessage('assistant', 'Podes agora perguntar sobre avalia√ß√µes, docentes, etc.')
    }
    isTyping.value = false
    return
  }

  try {
    const { data } = await axios.post('/api/chat', {
      prompt: input,
      uc: ucSelecionada.value,
    })
    addMessage('assistant', data.reply)
  } catch (err) {
    addMessage('assistant', '‚ö†Ô∏è Ocorreu um erro ao processar a tua pergunta. Tenta novamente.')
  } finally {
    isTyping.value = false
  }
}`}
                />

                <DocsCallout
                    variant="warning"
                    title="Gest√£o de erros"
                    client:load
                >
                    <p class="text-sm text-muted-foreground">
                        Todos os erros de rede, parsing ou resposta inesperada
                        s√£o capturados e traduzidos numa mensagem humanizada.
                        Isto evita falhas silenciosas e mant√©m a UX fluida mesmo
                        quando o LLM ou o endpoint est√£o offline.
                    </p>
                </DocsCallout>

                <h4 class="font-semibold mt-6">Formata√ß√£o e contexto</h4>
                <p class="text-sm text-muted-foreground">
                    O endpoint serverless inclui no prompt o contexto formatado
                    da UC (descri√ß√£o, objetivos, avalia√ß√µes consolidadas e corpo
                    docente). Isso garante que as respostas s√£o contextualizadas
                    e factualmente limitadas √† UC selecionada.
                </p>

                <CodeBlock
                    language="ts"
                    code={`const contexto = \`
UC: \${uc.sigla} ‚Äî \${uc.nome}
Objetivos: \${uc.objetivos}
Avalia√ß√µes: \${uc.avaliacoes.map(a => a.descricao + ' (' + a.peso + '%)').join(', ')}
Docentes: \${uc.docentes.join(', ')}
\`

const { data } = await axios.post('/api/chat', {
  prompt: 'Responde com base apenas neste contexto:\n' + contexto + '\n\nPergunta: ' + input
})`}
                />
            </DocsSection>

            <!-- ============================================================= -->
            <!-- Decis√µes de Design -->
            <!-- ============================================================= -->
            <DocsSection
                id="design-decisions"
                title="üß† Decis√µes de Design"
                client:load
            >
                <p class="text-muted-foreground mb-6">
                    O <strong>Chatbot</strong> foi concebido com base em tr√™s princ√≠pios:
                    <em>autonomia local</em>,
                    <em>simplicidade cognitiva</em> e <em
                        >neutralidade de framework</em
                    >. Esta sec√ß√£o explica as decis√µes arquitet√≥nicas e os
                    trade-offs considerados.
                </p>

                <h4 class="font-semibold mt-4">1. Autonomia local</h4>
                <p class="text-sm text-muted-foreground">
                    O componente gere o seu pr√≥prio estado interno e n√£o depende
                    de um store global. Esta escolha reduz a complexidade e
                    permite que o Chatbot seja usado isoladamente (por exemplo,
                    numa p√°gina est√°tica com fallback local sem rede).
                </p>

                <h4 class="font-semibold mt-6">2. Simplicidade cognitiva</h4>
                <p class="text-sm text-muted-foreground">
                    A l√≥gica de fluxo √© leg√≠vel e orientada a fases
                    (‚Äúselecionar‚Äù / ‚Äúchat‚Äù). Evita-se FSMs complexas, mas
                    mant√©m-se previsibilidade e rastreabilidade no
                    comportamento.
                </p>

                <h4 class="font-semibold mt-6">3. Neutralidade de framework</h4>
                <p class="text-sm text-muted-foreground">
                    Apesar de implementado em Vue 3, o design √© suficientemente
                    gen√©rico para ser portado para React ou Svelte. O core
                    (gest√£o de UC, normaliza√ß√£o e API calls) √© completamente
                    independente de Vue.
                </p>

                <h4 class="font-semibold mt-6">
                    4. User Experience (UX) consistente
                </h4>
                <p class="text-sm text-muted-foreground">
                    O estilo segue o mesmo sistema visual de todos os
                    componentes do projeto (bot√µes, cards, etc.). A experi√™ncia
                    √© intencionalmente minimalista e sem distrac√ß√µes ‚Äî o foco √©
                    no conte√∫do da resposta.
                </p>

                <h4 class="font-semibold mt-6">5. Comunica√ß√£o com o LLM</h4>
                <p class="text-sm text-muted-foreground">
                    A API intermedi√°ria (<code>/api/chat</code>) atua como
                    camada de controlo. Isso previne inje√ß√£o direta de prompts
                    pelo cliente e permite aplicar pol√≠ticas de filtragem ou
                    rate-limiting antes de chegar ao modelo.
                </p>

                <h4 class="font-semibold mt-6">
                    6. Tratamento de erros humanizado
                </h4>
                <p class="text-sm text-muted-foreground">
                    Mensagens de erro s√£o formuladas de forma emp√°tica (‚ÄúTenta
                    novamente‚Äù, ‚ÄúOcorreu um erro‚Ä¶‚Äù), para n√£o quebrar a imers√£o
                    da conversa. A prioriza√ß√£o de UX sobre logs t√©cnicos √©
                    deliberada.
                </p>

                <h4 class="font-semibold mt-6">
                    7. Consolida√ß√£o de avalia√ß√µes
                </h4>
                <p class="text-sm text-muted-foreground">
                    A fun√ß√£o <code>consolidarAvaliacoes</code> foi desenhada para
                    corrigir inconsist√™ncias no JSON de origem, agrupando avalia√ß√µes
                    duplicadas com base em data e descri√ß√£o. Isto evita duplica√ß√£o
                    de informa√ß√£o no prompt e melhora a qualidade das respostas.
                </p>

                <h4 class="font-semibold mt-6">8. Seguran√ßa de dados</h4>
                <p class="text-sm text-muted-foreground">
                    Nenhum dado sens√≠vel √© armazenado ou enviado diretamente. O
                    hist√≥rico reside apenas em mem√≥ria, e pode ser limpo a
                    qualquer momento com um <code>reset()</code> (fun√ß√£o recomendada
                    para futura extens√£o).
                </p>

                <DocsCallout
                    variant="info"
                    title="Resumo das decis√µes"
                    client:load
                >
                    <ul
                        class="list-disc list-inside text-sm text-muted-foreground"
                    >
                        <li>Arquitetura minimalista e transparente;</li>
                        <li>
                            Separa√ß√£o clara entre UI e l√≥gica de conversa√ß√£o;
                        </li>
                        <li>Sem depend√™ncia de estado global;</li>
                        <li>Camada de API controlada e audit√°vel;</li>
                        <li>UX e mensagens humanizadas.</li>
                    </ul>
                </DocsCallout>
            </DocsSection>
            <!-- ============================================================= -->
            <!-- Integra√ß√£o com outras partes do projeto -->
            <!-- ============================================================= -->
            <DocsSection
                id="integracao"
                title="üß∞ Integra√ß√£o com outras partes do projeto"
                client:load
            >
                <p class="text-muted-foreground mb-6">
                    O <strong>Chatbot</strong> foi projetado para integrar-se nativamente
                    com o ecossistema existente do projeto, nomeadamente com o ficheiro
                    <code>ucs.json</code>, os endpoints API e os componentes da
                    UI. Esta sec√ß√£o explica como se processa essa integra√ß√£o e
                    como adaptar o componente para novos contextos ou fontes de
                    dados.
                </p>

                <h4 class="font-semibold mt-4">
                    1. Fonte de dados ‚Äî <code>ucs.json</code>
                </h4>
                <p class="text-sm text-muted-foreground mb-2">
                    O ficheiro <code>/data/ucs.json</code> cont√©m o cat√°logo de unidades
                    curriculares e √© carregado de forma ass√≠ncrona via <code
                        >fetch</code
                    > na montagem do componente. A sua estrutura deve seguir o seguinte
                    formato m√≠nimo:
                </p>

                <CodeBlock
                    language="json"
                    code={`[
  {
    "sigla": "ASCN",
    "nome": "Arquitetura de Sistemas de Computa√ß√£o e Redes",
    "perfil": "Explora√ß√£o de conceitos de redes e sistemas distribu√≠dos...",
    "criterios": ["Trabalho pr√°tico", "Exame final"],
    "docentes": ["Prof. A", "Prof. B"],
    "avaliacoes": [
      { "data": "2024-10-01", "descricao": "Entrega TP1" },
      { "data": "2024-11-15", "descricao": "Exame Final" }
    ]
  }
]`}
                />

                <p class="text-sm text-muted-foreground mt-3">
                    Qualquer propriedade adicional presente neste JSON √©
                    ignorada, mas pode ser aproveitada no <code>contextoUC</code
                    > enviado para o LLM, caso se deseje enriquecer as respostas.
                </p>

                <DocsCallout
                    variant="info"
                    title="Carregamento local vs remoto"
                    client:load
                >
                    <p class="text-sm text-muted-foreground">
                        Embora o Chatbot utilize <code
                            >fetch("/data/ucs.json")</code
                        >, nada impede que este ficheiro seja servido por uma
                        API externa (ex: <code>/api/ucs</code>). O comportamento
                        permanece id√™ntico, bastando garantir que o JSON
                        devolvido segue o mesmo esquema.
                    </p>
                </DocsCallout>

                <h4 class="font-semibold mt-6">
                    2. Endpoint de intermedia√ß√£o ‚Äî <code>/api/chat.ts</code>
                </h4>
                <p class="text-sm text-muted-foreground">
                    O endpoint <code>pages/api/chat.ts</code> atua como um proxy
                    controlado entre o cliente e o modelo LLM externo. O objetivo
                    √© evitar exposi√ß√£o direta da chave API e aplicar camadas de valida√ß√£o.
                </p>

                <CodeBlock
                    language="ts"
                    code={`import type { APIRoute } from "astro"

export const POST: APIRoute = async ({ request }) => {
  try {
    const body = await request.json()
    const response = await fetch("https://apifreellm.com/api/openai/v1/chat/completions", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(body),
    })
    if (!response.ok) throw new Error('Resposta inv√°lida do modelo')
    const data = await response.json()
    return new Response(JSON.stringify(data), {
      headers: { "Content-Type": "application/json", "Access-Control-Allow-Origin": "*" },
    })
  } catch (err) {
    console.error(err)
    return new Response(JSON.stringify({ error: "Erro na comunica√ß√£o com o modelo" }), { status: 500 })
  }
}`}
                />

                <p class="text-sm text-muted-foreground mt-2">
                    Esta camada de intermedia√ß√£o √© fundamental para manter o
                    controlo sobre:
                </p>
                <ul
                    class="list-disc list-inside text-sm text-muted-foreground mt-2"
                >
                    <li>Gest√£o de limites de uso (rate limiting);</li>
                    <li>
                        Auditoria de prompts enviados e respostas devolvidas;
                    </li>
                    <li>
                        Substitui√ß√£o futura por modelos locais (ex: Ollama, LM
                        Studio).
                    </li>
                </ul>

                <h4 class="font-semibold mt-6">
                    3. Integra√ß√£o visual e navega√ß√£o
                </h4>
                <p class="text-sm text-muted-foreground">
                    O Chatbot usa o mesmo sistema de design (bot√µes, badges,
                    cards, etc.) baseado em
                    <strong>shadcn/ui</strong>, garantindo consist√™ncia visual
                    em toda a aplica√ß√£o. A integra√ß√£o no layout global √© feita
                    via lazy load, para n√£o sobrecarregar o bundle inicial.
                </p>

                <CodeBlock
                    language="astro"
                    code={`---
import Chatbot from "@/components/Chatbot.vue"
import DocsLayout from "@/layouts/DocsLayout.astro"
---

<DocsLayout title="Assistente de UCs">
  <Chatbot client:load />
</DocsLayout>`}
                />

                <DocsCallout
                    variant="success"
                    title="Boas pr√°ticas de integra√ß√£o"
                    client:load
                >
                    <ul
                        class="list-disc list-inside text-sm text-muted-foreground"
                    >
                        <li>
                            Carregar o componente apenas quando a rota
                            ‚Äú/assistente‚Äù for visitada;
                        </li>
                        <li>
                            Servir o JSON de UCs de forma est√°tica (cache de
                            1h);
                        </li>
                        <li>
                            Evitar depend√™ncia de APIs externas sem fallback
                            local;
                        </li>
                        <li>
                            Tratar respostas de erro do LLM com mensagens
                            amig√°veis.
                        </li>
                    </ul>
                </DocsCallout>
            </DocsSection>

            <!-- ============================================================= -->
            <!-- Testes e Edge Cases -->
            <!-- ============================================================= -->
            <DocsSection id="testes" title="üß™ Testes e Edge Cases" client:load>
                <p class="text-muted-foreground mb-6">
                    O componente foi desenhado para lidar com v√°rios cen√°rios
                    extremos e falhas de comunica√ß√£o, mantendo sempre uma UX
                    fluida e previs√≠vel. Esta sec√ß√£o documenta os principais
                    casos de teste e respetivas estrat√©gias de mitiga√ß√£o.
                </p>

                <h4 class="font-semibold mt-4">1. UC inexistente</h4>
                <p class="text-sm text-muted-foreground mb-2">
                    Quando o utilizador escreve uma sigla ou nome que n√£o
                    corresponde a nenhuma UC, o Chatbot deve responder de forma
                    emp√°tica e oferecer alternativas.
                </p>

                <CodeBlock
                    language="ts"
                    code={`test('UC inexistente', async () => {
  userInput.value = 'InexistenteXYZ'
  await sendMessage()
  expect(messages.value[messages.value.length - 1].content)
    .toContain('N√£o encontrei nenhuma UC')
})`}
                />

                <h4 class="font-semibold mt-6">2. V√°rias correspond√™ncias</h4>
                <p class="text-sm text-muted-foreground mb-2">
                    Quando h√° v√°rias UCs parecidas, o Chatbot deve listar at√©
                    tr√™s e pedir clarifica√ß√£o.
                </p>

                <CodeBlock
                    language="ts"
                    code={`test('V√°rias correspond√™ncias', async () => {
  userInput.value = 'Comp'
  await sendMessage()
  expect(messages.value[messages.value.length - 1].content)
    .toContain('Qual delas pretendes?')
})`}
                />

                <h4 class="font-semibold mt-6">3. Falha de rede ou LLM</h4>
                <p class="text-sm text-muted-foreground">
                    Caso o endpoint <code>/api/chat</code> esteja em baixo ou a resposta
                    do modelo seja inv√°lida, o Chatbot devolve uma mensagem humanizada
                    e mant√©m o hist√≥rico intacto.
                </p>

                <CodeBlock
                    language="ts"
                    code={`test('Falha de rede', async () => {
  window.apifree = undefined
  userInput.value = 'Quando √© o exame final?'
  await sendMessage()
  expect(messages.value[messages.value.length - 1].content)
    .toContain('‚ö†Ô∏è')
})`}
                />

                <h4 class="font-semibold mt-6">4. Hist√≥rico longo</h4>
                <p class="text-sm text-muted-foreground">
                    O hist√≥rico de conversas √© truncado a 10 entradas antes de
                    cada chamada ao modelo. Isto previne que prompts fiquem
                    demasiado extensos e evita timeouts no endpoint.
                </p>

                <DocsCallout
                    variant="warning"
                    title="Limite de hist√≥rico"
                    client:load
                >
                    <p class="text-sm text-muted-foreground">
                        Se precisares de manter um hist√≥rico completo entre
                        sess√µes, considera persistir o estado em <code
                            >localStorage</code
                        > ou <code>IndexedDB</code> com compress√£o JSON.
                    </p>
                </DocsCallout>

                <h4 class="font-semibold mt-6">5. Input vazio ou spam</h4>
                <p class="text-sm text-muted-foreground mb-2">
                    O campo de input bloqueia mensagens vazias e impede envios
                    consecutivos enquanto o estado <code>loading</code> √© <code
                        >true</code
                    >.
                </p>

                <CodeBlock
                    language="ts"
                    code={`test('Input vazio', async () => {
  userInput.value = '   '
  await sendMessage()
  expect(messages.value.length).toBeGreaterThan(0) // Nenhuma nova mensagem adicionada
})`}
                />

                <h4 class="font-semibold mt-6">
                    6. Consolida√ß√£o de avalia√ß√µes duplicadas
                </h4>
                <p class="text-sm text-muted-foreground">
                    O teste garante que a fun√ß√£o <code
                        >consolidarAvaliacoes</code
                    > funde per√≠odos cont√≠nuos de avalia√ß√µes repetidas num s√≥ intervalo.
                </p>

                <CodeBlock
                    language="ts"
                    code={`test('Consolida√ß√£o de avalia√ß√µes duplicadas', () => {
  const avaliacoes = [
    { data: '2024-03-01', descricao: 'Projeto' },
    { data: '2024-03-02', descricao: 'Projeto' },
    { data: '2024-03-15', descricao: 'Exame' }
  ]
  const consolidadas = consolidarAvaliacoes(avaliacoes)
  expect(consolidadas).toEqual([
    { descricao: 'Projeto', periodo: '2024-03-01 at√© 2024-03-02' },
    { descricao: 'Exame', periodo: '2024-03-15' }
  ])
})`}
                />

                <DocsCallout
                    variant="success"
                    title="Cobertura m√≠nima recomendada"
                    client:load
                >
                    <ul
                        class="list-disc list-inside text-sm text-muted-foreground"
                    >
                        <li>UC inexistente;</li>
                        <li>UC amb√≠gua (v√°rias correspond√™ncias);</li>
                        <li>Falha de rede e LLM;</li>
                        <li>Hist√≥rico truncado;</li>
                        <li>Input vazio;</li>
                        <li>Consolida√ß√£o de avalia√ß√µes duplicadas.</li>
                    </ul>
                </DocsCallout>
            </DocsSection>
            <!-- ============================================================= -->
            <!-- Boas pr√°ticas e recomenda√ß√µes -->
            <!-- ============================================================= -->
            <DocsSection
                id="boas-praticas"
                title="üí° Boas pr√°ticas e recomenda√ß√µes"
                client:load
            >
                <p class="text-muted-foreground mb-6">
                    O Chatbot foi concebido com foco em clareza, modularidade e
                    robustez. Seguir boas pr√°ticas de integra√ß√£o e manuten√ß√£o
                    garante que o componente se mantenha previs√≠vel, performante
                    e f√°cil de evoluir.
                </p>

                <h4 class="font-semibold mt-4">
                    1. Separa√ß√£o de responsabilidades
                </h4>
                <ul class="list-disc list-inside text-sm text-muted-foreground">
                    <li>
                        Mant√©m a l√≥gica de IA e comunica√ß√£o de rede isolada do
                        template visual.
                    </li>
                    <li>
                        Utiliza <code>watch</code> apenas para efeitos colaterais
                        inevit√°veis (como scroll autom√°tico).
                    </li>
                    <li>
                        Evita mutar o array <code>messages</code> fora de m√©todos
                        declarados (use helpers internos).
                    </li>
                </ul>

                <h4 class="font-semibold mt-6">2. Performance</h4>
                <ul class="list-disc list-inside text-sm text-muted-foreground">
                    <li>
                        Limita o n√∫mero de mensagens no hist√≥rico a 10‚Äì15,
                        conforme capacidade de contexto do modelo.
                    </li>
                    <li>
                        Evita chamadas redundantes ao LLM ‚Äî verifica se h√°
                        contexto suficiente localmente antes de enviar.
                    </li>
                    <li>
                        Considera pr√©-carregar o JSON de UCs em cache via <code
                            >astro:prefetch</code
                        >.
                    </li>
                </ul>

                <h4 class="font-semibold mt-6">3. UX e acessibilidade</h4>
                <ul class="list-disc list-inside text-sm text-muted-foreground">
                    <li>
                        Usa feedback visual (spinner, anima√ß√µes) para comunicar
                        estados de carregamento.
                    </li>
                    <li>
                        Permite enviar mensagens com Enter e Shift+Enter para
                        multiline.
                    </li>
                    <li>
                        Evita que respostas longas causem overflow visual no
                        container de mensagens.
                    </li>
                </ul>

                <h4 class="font-semibold mt-6">4. Resili√™ncia</h4>
                <DocsCallout
                    variant="warning"
                    title="Tratamento de erros"
                    client:load
                >
                    <p class="text-sm text-muted-foreground">
                        Implementa sempre tratamento de erros para rede e
                        respostas inv√°lidas. Mesmo um <em>timeout</em> ou falha de
                        parsing deve devolver uma resposta amig√°vel e orientadora.
                    </p>
                </DocsCallout>

                <h4 class="font-semibold mt-6">5. Seguran√ßa</h4>
                <ul class="list-disc list-inside text-sm text-muted-foreground">
                    <li>
                        Evita inje√ß√£o de conte√∫do direto em <code>v-html</code>.
                    </li>
                    <li>
                        Sanitiza prompts e respostas antes de exibir no DOM.
                    </li>
                    <li>
                        Controla o acesso ao endpoint <code>/api/chat</code> com
                        quotas e valida√ß√£o de origem.
                    </li>
                </ul>

                <h4 class="font-semibold mt-6">
                    6. Versionamento e documenta√ß√£o
                </h4>
                <p class="text-sm text-muted-foreground mb-3">
                    Como este componente tende a evoluir rapidamente (novos
                    modelos, prompts, contextos), √© essencial documentar
                    altera√ß√µes de API e comportamento. Recomenda-se manter um
                    ficheiro <code>CHANGELOG.md</code> associado.
                </p>

                <CodeBlock
                    language="md"
                    code={`## v1.2.0 (2025-10-27)
- Adicionado suporte a prompts contextuais.
- Novo mecanismo de consolida√ß√£o de avalia√ß√µes.
- Melhor tratamento de erros de rede.
- Atualiza√ß√£o da integra√ß√£o com ucs.json.`}
                />

                <DocsCallout
                    variant="success"
                    title="Checklist de manuten√ß√£o"
                    client:load
                >
                    <ul
                        class="list-disc list-inside text-sm text-muted-foreground"
                    >
                        <li>
                            Testar com 3 a 5 UCs reais e verificar respostas
                            contextualizadas;
                        </li>
                        <li>
                            Monitorizar logs do endpoint <code>/api/chat</code> para
                            exce√ß√µes;
                        </li>
                        <li>
                            Atualizar descri√ß√µes e prompts sempre que o
                            curr√≠culo mudar;
                        </li>
                        <li>
                            Validar JSON antes de carregar (evita erros
                            silenciosos no front-end).
                        </li>
                    </ul>
                </DocsCallout>
            </DocsSection>

            <!-- ============================================================= -->
            <!-- Extens√µes futuras / roadmap -->
            <!-- ============================================================= -->
            <DocsSection
                id="roadmap"
                title="üß≠ Extens√µes futuras / roadmap"
                client:load
            >
                <p class="text-muted-foreground mb-6">
                    A arquitetura modular do Chatbot facilita a sua evolu√ß√£o
                    incremental. Esta sec√ß√£o descreve algumas poss√≠veis
                    melhorias e expans√µes planeadas para vers√µes futuras.
                </p>

                <h4 class="font-semibold mt-4">
                    1. Contexto cruzado entre UCs
                </h4>
                <p class="text-sm text-muted-foreground">
                    Permitir que o Chatbot identifique rela√ß√µes entre UCs (ex:
                    pr√©-requisitos ou t√≥picos comuns), oferecendo respostas que
                    agreguem conhecimento transversal.
                </p>

                <h4 class="font-semibold mt-6">2. Hist√≥rico persistente</h4>
                <p class="text-sm text-muted-foreground">
                    Implementar armazenamento local (via <code
                        >localStorage</code
                    > ou <code>IndexedDB</code>) para preservar o hist√≥rico
                    entre sess√µes, com op√ß√£o de exporta√ß√£o em JSON.
                </p>

                <h4 class="font-semibold mt-6">3. Modo multimodal</h4>
                <p class="text-sm text-muted-foreground">
                    Adicionar suporte a mensagens com anexos (ex: PDFs ou
                    imagens), permitindo ao modelo interpretar documentos de
                    avalia√ß√£o e fornecer feedback contextual.
                </p>

                <h4 class="font-semibold mt-6">
                    4. Integra√ß√£o com calend√°rio institucional
                </h4>
                <p class="text-sm text-muted-foreground">
                    Ligar o Chatbot ao componente <code>Calendar.vue</code> para
                    apresentar prazos e eventos diretamente na conversa.
                </p>

                <h4 class="font-semibold mt-6">5. Painel administrativo</h4>
                <p class="text-sm text-muted-foreground">
                    Criar uma interface interna onde docentes possam visualizar
                    intera√ß√µes, ajustar prompts, e definir respostas padr√£o para
                    cada UC.
                </p>

                <DocsCallout
                    variant="info"
                    title="Modelo de expans√£o recomendada"
                    client:load
                >
                    <p class="text-sm text-muted-foreground">
                        Sempre que uma nova funcionalidade for adicionada, deve
                        ser isolada em subcomponentes Vue e documentada
                        separadamente neste mesmo formato de documenta√ß√£o.
                    </p>
                </DocsCallout>
            </DocsSection>

            <!-- ============================================================= -->
            <!-- Preview interativo -->
            <!-- ============================================================= -->
            <DocsSection id="preview" title="üí¨ Preview interativo" client:load>
                <p class="text-muted-foreground mb-4">
                    Abaixo encontras uma inst√¢ncia interativa do componente <code
                        >Chatbot</code
                    >, carregada diretamente do c√≥digo-fonte principal. Este
                    exemplo utiliza o endpoint local <code>/api/chat</code> e o ficheiro
                    <code>ucs.json</code> padr√£o.
                </p>

                <div class="border rounded-2xl p-4 bg-card">
                    <Chatbot1 client:only="vue" />
                </div>

                <DocsCallout
                    variant="info"
                    title="Sandbox de demonstra√ß√£o"
                    client:load
                >
                    <p class="text-sm text-muted-foreground">
                        O preview n√£o guarda hist√≥rico entre refreshes. Para
                        testar prompts mais complexos ou integra√ß√£o real, acede
                        √† rota dedicada
                        <code>/assistente</code>.
                    </p>
                </DocsCallout>
            </DocsSection>
        </table>
    </DocsSection></DocsLayout
>
